<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script>
    (function() {
      const saved = localStorage.getItem('totemino_theme');
      const theme = saved || 
        (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', theme);
    })();
    window.addEventListener('pageshow', function(event) {
        if (event.persisted || performance.getEntriesByType('navigation')[0]?.type === 'back_forward') {
          location.reload();
        }
    });
  </script>
  <title>Checkout - Totemino</title>
  <link rel="icon" type="image/png" href="img/favicon.png">
	<link rel="stylesheet" href="cookie-banner.css"/>
  <link rel="stylesheet" href="checkout-styles.css" />
  <link rel="stylesheet" href="checkout-methods.css" />
  <link rel="stylesheet" href="menu-customization-styles.css"/>
</head>
<body>
  <!-- Luci -->
  <div class="bg-light light1"></div>
  <div class="bg-light light2"></div>
  <div class="bg-light light3"></div>
  
  <!-- Header -->
  <div class="title">
    <div class="logo_space">
      <img class="theme-img" data-light="img/logo/1_light.png" data-dark="img/logo/1_dark.png" alt="Logo" id="logoSwap">
      <a href="index-user.html"><h1>Totemino</h1></a>
    </div>
    <div>
      <button id="back-to-menu" class="header-btn" type="button"><img class="theme-img" data-light="img/exit_light.png" data-dark="img/exit_dark.png" alt="Torna al menu"></button>
      <button id="theme" class="header-btn" type="button"><img class="theme-img" data-light="img/theme_light.png" data-dark="img/theme_dark.png" alt="Cambia tema"></button>
    </div>
  </div>

  <!-- Step Navbar -->
  <div class="categories" id="checkout-nav">
    <div class="pill"></div>
    <button class="active">Il tuo ordine</button>
    <button>Riepilogo</button>
  </div>

  <!-- Sezione: Il tuo ordine -->
  <div id="section-ordine" class="checkout-section">
    <div class="checkout-wrapper">
      <div class="checkout-list" id="checkout-list"></div>
    </div>

    <!-- Popup per modifiche ordine -->
    <div class="popup hidden">
      <div class="popup-content">
        <button class="close-popup">
          <img src="img/x.png" />
        </button>
        <img class="popup-img" src="" alt="Prodotto" />
        <h2 class="popup-title"></h2>
        <p class="popup-ingredients"></p>
        <div class="popup-notes-wrapper">
          <textarea class="popup-notes" placeholder="Scrivi modifiche..."></textarea>
          <button class="popup-send-btn">
            <img src="img/send.png" alt="Invia" />
          </button>
        </div>      
        <div class="popup-controls"></div>
      </div>
    </div>

    <!-- Suggestions List -->
    <div class="suggestions-wrapper">
      <div class="suggestions-list"></div>
    </div>

    <div class="checkout-total">
      <p style="display: none;">Totale</p>
      <h3 id="checkout-total" style="display: none;">€0.00</h3>
      <button class="next">Completa</button>
    </div>
  </div>

  <!-- Sezione: Riepilogo -->
  <div id="section-pagamento" class="checkout-section">
    <div id="servizio-tavolo" class="servizio-box">
      <div class="servizio-flex">
        <div class="servizio-img-wrapper"><img src="img/s_tavolo.png" class="servizio-img"></div>
        <div>
          <h4>Servizio al tavolo</h4>
          <p>Il tuo ordine verrà preparato e servito al tavolo in poco tempo.</p>
        </div>
      </div>
      <div><img src="img/arrow_select.png" class="servizio-icon"></div>
    </div>

    <div id="servizio-delivery" class="servizio-box">
      <div class="servizio-flex">
        <div class="servizio-img-wrapper"><img src="img/s_delivery.png" class="servizio-img"></div>
        <div>
          <h4>Consegna a domicilio</h4>
          <p>Il tuo ordine sarà consegnato al più presto al tuo indirizzo.</p>
        </div>
      </div>
      <div><img src="img/arrow_select.png" class="servizio-icon"></div>
    </div>

    <div id="servizio-takeaway" class="servizio-box">
      <div class="servizio-flex">
        <div class="servizio-img-wrapper"><img src="img/s_takeaway.png" class="servizio-img" alt="Icona take away"></div>
        <div>
          <h4>Take away</h4>
          <p>Ordina ora e ritira il tuo ordine al banco quando vuoi.</p>
        </div>
      </div>
      <div><img src="img/arrow_select.png" class="servizio-icon" alt="Seleziona"></div>
    </div>

    <div id="servizio-ordine" class="servizio-box">
      <div class="servizio-flex">
        <div class="servizio-img-wrapper"><img src="img/s_ordine.png" class="servizio-img"></div>
        <div>
          <h4>Mostra ordine</h4>
          <p>Visualizza l'ordine completo per leggerlo al cameriere.</p>
        </div>
      </div>
      <div><img src="img/arrow_select.png" class="servizio-icon"></div>
    </div>
  </div>
  
  <!-- Popup Suggerimenti -->
  <div class="popup-suggestions hidden">
    <div class="popup-suggestions-content">
      <h3><span id="title-name">Totemino</span> ti consiglia:</h3>
      <div class="suggestions-grid"></div>
      <button id="suggestions-action-btn" class="next locked">No grazie</button>
    </div>
  </div>

  <script src="cookie-banner.js"></script>
  <script src="collect-user-info.js"></script>
  <script src="suggestions-engine.js"></script>
  <script src="checkout-methods.js"></script>
  <script src="checkout-script.js"></script>
  <script src="theme.js"></script>
  <script src="logo-pop.js"></script>
</body>
</html>