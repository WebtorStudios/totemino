<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script>
    (function() {
      const saved = localStorage.getItem('totemino_theme');
      const theme = saved || 
        (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', theme);
    })();
    window.addEventListener('pageshow', function(event) {
      if (event.persisted || performance.getEntriesByType('navigation')[0]?.type === 'back_forward') {
        location.reload();
      }
    });
  </script>
  <title>Gestione Ordini - Totemino</title>
  <link rel="icon" type="image/png" href="img/favicon.png">
  <link rel="stylesheet" href="gestione-styles.css" />
</head>
<body>

  <!-- Luci -->
  <div class="bg-light light1"></div>
  <div class="bg-light light2"></div>
  <div class="bg-light light3"></div>
  
  <!-- Header -->
  <div class="title">
    <div>
      <img class="theme-img" data-light="img/logo/1_light.png" data-dark="img/logo/1_dark.png" alt="Logo" id="logoSwap">
      <a href="index.html"><h1>Totemino</h1></a>
      <p>Gestione</p>
    </div>

    <div class="header-buttons-wrapper">
      <button id="mobile-menu-toggle" class="header-btn mobile-only" type="button">
        <img class="theme-img" data-light="img/hamburger_light.png" data-dark="img/hamburger_dark.png" alt="Menu">
      </button>

      <div class="desktop-buttons">
        <button id="fullscreen" class="header-btn" type="button">
          <img class="theme-img" data-light="img/fullscreen_light.png" data-dark="img/fullscreen_dark.png" alt="Schermo intero">
        </button>
        <button id="table-refresh-btn" class="header-btn" type="button">
          <img class="theme-img" data-light="img/refresh_light.png" data-dark="img/refresh_dark.png" alt="Aggiorna">
        </button>
        <button id="back-btn" class="header-btn" type="button">
          <img class="theme-img" data-light="img/exit_light.png" data-dark="img/exit_dark.png" alt="Torna a Gestione">
        </button>
        <button id="theme" class="header-btn" type="button">
          <img class="theme-img" data-light="img/theme_light.png" data-dark="img/theme_dark.png" alt="Cambia tema">
        </button>
      </div>
    </div>
  </div>


  <!-- Mobile Sidebar Menu -->
  <div id="mobile-sidebar" class="mobile-sidebar">
    <div class="mobile-sidebar-content">
      <button class="sidebar-btn" data-action="fullscreen">
        <img class="theme-img" data-light="img/fullscreen_light.png" data-dark="img/fullscreen_dark.png" alt="Schermo intero">
        <span>Schermo intero</span>
      </button>
      <button class="sidebar-btn" data-action="refresh">
        <img class="theme-img" data-light="img/refresh_light.png" data-dark="img/refresh_dark.png" alt="Aggiorna">
        <span>Aggiorna</span>
      </button>
      <button class="sidebar-btn" data-action="profile">
        <img class="theme-img" data-light="img/exit_light.png" data-dark="img/exit_dark.png" alt="Vai a Profilo">
        <span>Vai a Profilo</span>
      </button>
      <button class="sidebar-btn" data-action="theme">
        <img class="theme-img" data-light="img/theme_light.png" data-dark="img/theme_dark.png" alt="Cambia tema">
        <span>Cambia tema</span>
      </button>
    </div>
  </div>

  <div id="mobile-sidebar-overlay" class="mobile-sidebar-overlay"></div>


  <!-- Step Navbar -->
  <div class="categories" id="table-nav">
    <div class="pill"></div>

    <!-- Ogni tab è generato dinamicamente dallo script: table, takeaway, delivery -->
    <!-- Lo script riempirà automaticamente -->
  </div>


  <!-- Contenuto -->
  <main>

    <!-- ========================= -->
    <!--        ORDINI TAVOLO      -->
    <!-- ========================= -->
    <section class="table-section active"></section>
    <section class="table-section completed hidden"></section>

    <!-- ========================= -->
    <!--      RITIRO AL BANCO      -->
    <!-- ========================= -->
    <section class="takeaway-section hidden"></section>
    <section class="takeaway-section completed hidden"></section>

    <!-- ========================= -->
    <!--      CONSEGNE A DOMICILIO -->
    <!-- ========================= -->
    <section class="delivery-section hidden"></section>
    <section class="delivery-section completed hidden"></section>

  </main>


  <!-- Popup Dettaglio Ordine -->
  <div class="gpopup hidden">
    <div class="gpopup-content">
      <button class="close-popup gpopup-close-btn">
        <img src="img/x.png" alt="Chiudi popup" />
      </button>

      <div class="gpopup-header">
        <h2 class="gpopup-title">Ordine</h2>
        <div class="gpopup-info">
          <span class="gpopup-date"></span>
          <span class="gpopup-total"></span>
        </div>
      </div>

      <div class="gpopup-items"></div>

      <div class="gpopup-actions">
        <div class="gpopup-actions-row">
          <button class="status-btn toggle-status">
            <span class="status-icon"></span>
            <span class="status-text"></span>
          </button>
          <button id="open-delete-popup">
            <img src="img/delete.png">
          </button>
        </div>
      </div>

      <!-- Delete Popup -->
      <div class="delete-popup-overlay">
        <div class="delete-popup">
          <div class="delete-popup-header">
            <h1>Sei sicuro?</h1>
            <p>Eliminare questo ordine non può essere annullato</p>
          </div>
          <div class="delete-popup-actions">
            <button id="cancel-delete">Annulla</button>
            <button id="delete-btn">Elimina</button>
          </div>
        </div>
      </div>

    </div>
  </div>


  <!-- Script -->
  <script src="auth-protection.js"></script>
  <script src="theme.js"></script>
  <script src="logo-pop.js"></script>
  <script src="gestione-script.js"></script>
  <script src="mobile-menu.js"></script>

</body>
</html>

